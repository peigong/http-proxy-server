<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Http-proxy-server by localad</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Http-proxy-server</h1>
        <p>HTTP反向代理服务器</p>

        <p class="view"><a href="https://github.com/localad/http-proxy-server">View the Project on GitHub <small>localad/http-proxy-server</small></a></p>


        <ul>
          <li><a href="https://github.com/localad/http-proxy-server/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/localad/http-proxy-server/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/localad/http-proxy-server">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="http%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8" class="anchor" href="#http%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="octicon octicon-link"></span></a>HTTP反向代理服务器</h1>

<h2>
<a name="%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84" class="anchor" href="#%E9%83%A8%E7%BD%B2%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="octicon octicon-link"></span></a>部署服务的目录结构</h2>

<p>部署服务需要的目录结构如下：</p>

<ul>
<li>
<strong>config：</strong>服务的配置目录。</li>
<li>
<strong>proxy：</strong>服务的软链接目录。</li>
<li>
<strong>release：</strong>版本发布目录。</li>
</ul><p><strong>建议：</strong>可以部署在目标服务器的<code>/home/localad/http-proxy-server</code>目录下。</p>

<h2>
<a name="%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2%E7%9A%84%E6%96%B9%E6%B3%95" class="anchor" href="#%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2%E7%9A%84%E6%96%B9%E6%B3%95"><span class="octicon octicon-link"></span></a>服务部署的方法</h2>

<h3>
<a name="%E5%85%8B%E9%9A%86%E5%92%8C%E9%83%A8%E7%BD%B2" class="anchor" href="#%E5%85%8B%E9%9A%86%E5%92%8C%E9%83%A8%E7%BD%B2"><span class="octicon octicon-link"></span></a>克隆和部署</h3>

<p>使用GIT克隆项目代码：</p>

<pre><code>cd /home/localad/http-proxy-server/release
git clone https://github.com/localad/http-proxy-server.git http-proxy-server-{版本号} -b {版本号}
</code></pre>

<h3>
<a name="%E5%BB%BA%E7%AB%8B%E8%BD%AF%E8%BF%9E%E6%8E%A5" class="anchor" href="#%E5%BB%BA%E7%AB%8B%E8%BD%AF%E8%BF%9E%E6%8E%A5"><span class="octicon octicon-link"></span></a>建立软连接</h3>

<pre><code>rm -rf /home/localad/http-proxy-server/proxy
ln -s /home/localad/http-proxy-server/release/http-proxy-server-{版本号} /home/localad/http-proxy-server/proxy
</code></pre>

<p>第一次部署时，需要复制系统配置文件，并设置：</p>

<pre><code>cp -r /home/localad/http-proxy-server/release/http-proxy-server-{版本号}/config /home/localad/http-proxy-server
</code></pre>

<h3>
<a name="%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2%E6%9C%8D%E5%8A%A1" class="anchor" href="#%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2%E6%9C%8D%E5%8A%A1"><span class="octicon octicon-link"></span></a>启动和停止服务</h3>

<p>进入<code>proxy/bin</code>目录，可以使用以下命令：</p>

<ul>
<li>
<code>sh ./server-install.sh</code>：安装NPM依赖</li>
<li>
<code>sh ./http-proxy-server.sh start</code>：启动</li>
<li>
<code>sh ./http-proxy-server.sh stop</code>：停止</li>
<li>
<code>sh ./http-proxy-server.sh restart</code>：重启</li>
</ul><h2>
<a name="url%E6%8B%A6%E6%88%AA%E7%9A%84%E9%99%90%E5%88%B6" class="anchor" href="#url%E6%8B%A6%E6%88%AA%E7%9A%84%E9%99%90%E5%88%B6"><span class="octicon octicon-link"></span></a>URL拦截的限制</h2>

<ul>
<li>只能是HTTP协议</li>
<li>只能是80端口</li>
<li>HOST与路径必须用<code>/</code>连接。</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/localad">localad</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>